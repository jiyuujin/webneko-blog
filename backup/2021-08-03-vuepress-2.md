---
date: 2021-08-03
title: TypeScript ãƒ™ãƒ¼ã‚¹ã® VuePress 2 ã«æ›´æ–°ã™ã‚‹
description: VuePress ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ 2 ç³»ã«ä¸Šã’ãŸçµŒé¨“ã‚’ç°¡å˜ã«æ›¸ã‹ã›ã¦ã„ãŸã ã„ãŸã€‚
slug: vuepress-2
reaction: ğŸ’‡â€â™€ï¸
category: Front
tags: 
 - Vue
 - VuePress
 - TypeScript
 - YouTube
---

è£½ä½œãƒ»é‹ç”¨ã—ã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã® VuePress ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ 2 ç³»ã«ä¸Šã’ãŸã€‚

[Flutter Osaka | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§](https://flutter-osaka.netlify.app)

ã“ã‚Œã¯ Flutter æ—¥æœ¬ãƒ¦ãƒ¼ã‚¶ã‚°ãƒ«ãƒ¼ãƒ— (å¤§é˜ª) ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆã§ã€ä¸»ã«ãƒãƒ³ã‚ºã‚ªãƒ³ã‚„ãƒŸãƒ¼ãƒˆã‚¢ãƒƒãƒ—ç­‰ã§é–‹ç™ºè€…ã¨æŠ€è¡“æƒ…å ±ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ 2 å¹´å‰ã«é–‹è¨­ã—ãŸã€‚

`docs/.vuepress/config.ts` ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ä¸¦ã³ã«ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®è¨­å®šã‚’æ›¸ãã€‚ã“ã‚Œã¯ VuePress 1 ç³»ã¨æ¯”ã¹ã¦æ›¸ãæ–¹ã¯ä¸€åˆ‡å¤‰ã‚ã‚‰ãªã„ã®ã§ä»Šå›ã¯å‰²æ„›ã•ã›ã¦ã„ãŸã ãã€‚

## VuePress 2 ã®ç‰¹é•·

VuePress ã¯ Markdown ã‚’ãƒ™ãƒ¼ã‚¹ã«æ›¸ã‘ã‚‹é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§é©å®œ Vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ã£ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã€‚

ã“ã®åº¦ VuePress 2 æœ€å¤§ã®ç‰¹å¾´ã¨ã—ã¦å‹å®‰å…¨ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨ã‚’æŒ™ã’ã‚‹ã€‚

â€» VuePress 2 ã¯ 8 æœˆ 3 æ—¥ç¾åœ¨ Î± ç‰ˆã§ã™ã€‚

- TypeScript ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸ
- Vue 3 ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸ
- webpack 5 ã‚µãƒãƒ¼ãƒˆ

ã“ã®ã‚ˆã†ã« TypeScript ã§æ›¸ã‘ã‚‹ã®ã¨åŒæ™‚ã« Vue 3 ã§ã‚‚æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

::: message is-primary

ã“ã‚Œã¾ã§ã® Vue 2 ç³»ã®æ›¸ãæ–¹ã§ã¯ãªã `createApp` ã§ç”Ÿæˆã•ã‚ŒãŸ app ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¯¾ã— use ã‚’ä½¿ã£ã¦ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ³¨å…¥ã—ã¦æ›¸ã‘ã°è‰¯ã„ã€‚

- Vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’èª­ã¿è¾¼ã‚€
- ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£è£½ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’èª­ã¿è¾¼ã‚€

```ts
import { defineClientAppEnhance } from '@vuepress/client'

import Example from './components/Example.vue'

export default defineClientAppEnhance(({ app, router, siteData }) => {
  app.component('Example', Example)
})
```

:::

ã¾ãŸå†…éƒ¨çš„ã« Vite ãŒå…¥ã£ã¦ãŠã‚Šä½“æ„Ÿçš„ã«ãƒ“ãƒ«ãƒ‰é€Ÿåº¦ãŒé€Ÿããªã£ãŸã€‚

[Roadmap #68](https://github.com/vuepress/vuepress-next/discussions/68)

### TypeScript ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸ

`docs/.vuepress/config.ts` ã§ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®è¨­å®šã‚’æ›¸ãã€‚

ã‹ã¤ã¦ JavaScript ã§æ›¸ã„ãŸè¨­å®šã‚’ `defineUserConfig<DefaultThemeOptions>` ã¨ã„ã†å‹å®šç¾©ã®ä¸‹ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```ts
import { defineUserConfig } from 'vuepress'
import type { DefaultThemeOptions } from 'vuepress'

export default defineUserConfig<DefaultThemeOptions>({
  //
})
```

meta å‘¨ã‚Šã®æ›¸ãæ–¹ã§ VuePress 1 ç³»ã¨é•ã†ç‚¹ãŒå­˜åœ¨ã—ãƒãƒã£ãŸã€‚

`lib/types/head.d.ts` ã‚’è¦‹ã‚‹ã¨ã€ç¬¬ 1 å¼•æ•°ã«ãƒ˜ãƒƒãƒ€ã‚¿ã‚°ã‚’å¿…ãšè¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

- CSS ã‚’èª­ã¿è¾¼ã‚€éš›ã« `link` ã‚’è¿½åŠ ã™ã‚‹
- JavaScript ã‚’èª­ã¿è¾¼ã‚€éš›ã« `script` ã‚’è¿½åŠ ã™ã‚‹

```ts
export declare type HeadConfig = [HeadTagEmpty, HeadAttrsConfig] | [HeadTagNonEmpty, HeadAttrsConfig, string];

export declare type HeadTagNonEmpty = 'title' | 'style' | 'script' | 'noscript' | 'template';

export declare type HeadTagEmpty = 'base' | 'link' | 'meta' | 'script';

export declare type HeadAttrsConfig = Record<string, string | boolean>;
```

ã“ã®è¦å‰‡ã‚’é ­ã«å…¥ã‚Œã¦ãŠã‘ã°ãƒãƒã‚‹å¿ƒé…ã‚‚ç„¡ããªã‚‹ã€‚

```ts
  head: [
    [
      `meta`,
      {
        hid: `title`,
        name: `title`,
        content: `<TITLE>`
      }
    ],
    [
      `meta`,
      {
        hid: `description`,
        name: `description`,
        content: `<DESCRIPTION>`
      }
    ],
  ]
```

## ãã®ä»–ãƒãƒã£ãŸç‚¹

å…ˆè¿°ã® Vue 3 ã«ã¤ã„ã¦ã€ã“ã‚Œã¾ã§ä½¿ãˆã¦ã„ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒä½¿ãˆãªããªã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚

Flutter æ—¥æœ¬ãƒ¦ãƒ¼ã‚¶ã‚°ãƒ«ãƒ¼ãƒ—ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã¯ YouTube ã®é…ä¿¡å‹•ç”»ã‚’åŸ‹ã‚è¾¼ã‚€ãŸã‚ `vue-youtube` ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚

ã—ã‹ã— VuePress 2 ã§ã¯ãã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå‹•ã‹ãªã„ã€‚

[Not compatible with Vue 3 RC #61](https://github.com/anteriovieira/vue-youtube/issues/61)

ãã‚Œã‚‚ãã®ã¯ãšã€ã¾ã  Vue 3 ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€‚

```
<template>
  <YouTube :video-id="videoId" :player-vars="playerVars" />
</template>

<script>
import YouTube from 'vue-youtube'

export default {
  components: {
    YouTube
  },
  props: {
    videoId: {
      type: String,
      default: ''
    }
  },
  data() {
    return {
      playerVars: {
        origin: `${location.protocol}//${location.hostname}/`
      }
    }
  }
}
</script>
```

ãã“ã§ Vue 3 ã«å¯¾å¿œã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ (ãŒã‚ã£ãŸã®ã§ã€ãã‚Œ) ã«ä¹—ã‚Šæ›ãˆãŸã€‚

[vue3-youtube](https://www.npmjs.com/package/vue3-youtube)

å…ˆã® `vue-youtube` ã¨é•ã„ YouTube URL ã‚’å¼•æ•°ã«ã—ã¦æ¸¡ã—ã¦ã„ã‚‹ã€‚

```
<template>
  <YouTube :src="`https://www.youtube.com/watch?v=${videoId}`" @ready="onReady" ref="youtube" />
</template>

<script lang="ts">
import YouTube from 'vue3-youtube'

export default {
  components: {
    YouTube
  },
  props: {
    videoId: {
      type: String,
      default: ''
    }
  },
  methods: {
    onReady() {
      this.$refs.youtube.playVideo()
    }
  }
}
</script>
```

ã‚ãã¾ã§é•ã†æ–¹ãŒé–‹ç™ºã•ã‚Œã¦ãŠã‚Šã“ã®è¾ºã‚Šã®ä»•æ§˜ãŒé•ã£ã¦ã„ã‚‹ç‚¹ã¯ä»•æ–¹ã‚ã‚Šã¾ã›ã‚“ã€‚
